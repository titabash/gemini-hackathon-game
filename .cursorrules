# flutter-boilerplate Cursor Rules

このプロジェクトは、Flutter + Riverpod + Drizzle ORM + Supabaseを使用したフルスタックボイラープレートです。

> **Note**: 詳細なルールは `.cursor/rules/` ディレクトリを参照してください。
> このファイルは概要のみを提供し、個別のルールは Project Rules として管理されています。

## プロジェクト構成

- **Frontend**: Flutter 3.35.6, Dart 3.5, Melos
- **UI**: Material Design 3, Adaptive Widgets
- **State Management**: Riverpod (riverpod_generator), Flutter Hooks
- **Navigation**: GoRouter
- **Data Models**: Freezed (immutable models)
- **HTTP Client**: Dio + Retrofit
- **i18n**: slang (type-safe translations)
- **Backend Python**: FastAPI, Clean Architecture, Ruff + MyPy
- **Database**: Drizzle ORM (TypeScript), PostgreSQL, Supabase
- **Edge Functions**: Deno, Supabase Edge Functions
- **モノレポ**: Melos

## 必須ポリシー

以下のポリシーは**必須**です。詳細は `.cursor/rules/` を参照:

| ポリシー | ルール | 概要 |
|---------|--------|------|
| Research-First | `@research` | 実装前に Context7/Dart MCP/Supabase MCP 確認必須 |
| TDD | `@tdd` | テスト駆動開発、All Green必須 |
| Commands | `@commands` | Makefileコマンド使用必須 |
| Auto-Generated | `@auto-generated` | `*.g.dart`, `*.freezed.dart` 編集禁止 |
| Supabase-First | `@supabase-first` | Supabase Flutter Client優先 |
| i18n | `@i18n` | 多言語対応必須（slang） |
| DateTime | `@datetime` | UTC保存、Frontend変換 |

## ドメイン別ルール

| ドメイン | ルール | Globs |
|---------|--------|-------|
| Frontend (Flutter) | `@frontend` | `frontend/**/*.dart` |
| Backend Python | `@backend-py` | `backend-py/**/*.py` |
| Edge Functions | `@edge-functions` | `supabase/functions/**/*.ts` |
| Database | `@database` | `drizzle/**/*.ts` |

## 開発コマンド

```bash
# 統合コマンド（推奨）
make check-quality       # 全プロジェクトのチェック
make fix-format          # 全プロジェクトのformat
make test-all            # 全テスト
make ci-check            # CI用の全チェック

# 初期化・実行
make init                # プロジェクト初期化
make run                 # バックエンド起動
make frontend            # Flutter Web開発サーバー起動（自動bootstrap）

# Flutter開発
make frontend-bootstrap  # Melosワークスペースセットアップ
make frontend-generate   # コード生成（Riverpod, Freezed, slang）
make frontend-test       # Flutter unit + widget tests
make frontend-widgetbook # Widgetbook起動（UIカタログ）
make frontend-patrol     # Patrol E2Eテスト

# データベース（ユーザー承認必須）
make migrate-dev         # マイグレーション生成 + 適用 + 型生成
make migrate-deploy      # マイグレーション適用
```

**IMPORTANT**: Always use `make frontend` instead of direct `flutter run` commands. The make command ensures proper Melos bootstrap and environment variable loading.

## ドキュメント参照

実装前に以下を必ず確認:

- `CLAUDE.md` - プロジェクト概要とAI開発ガイド
- `README.md` - セットアップ手順
- `.claude/rules/` - 必須ポリシー
- `.claude/skills/` - 技術別ガイド
- 各ドメインの `README.md` - ドメイン固有のガイドライン

## MCP Tools

開発時に積極的に活用：

- **Context7 MCP**: ライブラリ/フレームワークの最新ドキュメント取得
- **Dart MCP**: Flutter/Dart実装パターンとベストプラクティス
- **Supabase MCP**: データベーススキーマ、RLSポリシー確認
- **IDE MCP**: 診断情報とエラー確認

## ライセンス

MIT License
